/**
*
* Copyright (C) 2017 modela authors
* For license information, see LICENSE.txt
*/
// This file was autogenerated by go-to-protobuf. Do not edit it manually!

syntax = "proto2";

package github.com.metaprov.modelaapi.pkg.apis.infra.v1alpha1;

import "github.com/metaprov/modelaapi/pkg/apis/catalog/v1alpha1/generated.proto";
import "k8s.io/api/core/v1/generated.proto";
import "k8s.io/apimachinery/pkg/api/resource/generated.proto";
import "k8s.io/apimachinery/pkg/apis/meta/v1/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/generated.proto";
import "k8s.io/apimachinery/pkg/runtime/schema/generated.proto";

// Package-wide variables from generator "generated".
option go_package = "github.com/metaprov/modelaapi/pkg/apis/infra/v1alpha1";

message APITokenSpec {
  optional string name = 1;

  // Scopes is the list of scopes for this token.
  // +kubebuilder:validation:Optional
  repeated Scope scopes = 2;

  // The token itself
  optional k8s.io.api.core.v1.SecretReference secretRef = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=accounts,shortName=acct,singular=account,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Type",type="string",JSONPath=".spec.type",description=""
// +kubebuilder:printcolumn:name="Username",type="string",JSONPath=".spec.username",description=""
// +kubebuilder:printcolumn:name="Team",type="string",JSONPath=".spec.memberOf",description=""
// +kubebuilder:printcolumn:name="Phone",type="string",JSONPath=".spec.phone",description="",priority=1
// +kubebuilder:printcolumn:name="Email",type="string",JSONPath=".spec.email",description="",priority=1
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// Account represents a single user on the system or a team that other Accounts can be grouped under
message Account {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional AccountSpec spec = 2;

  // +optional
  optional AccountStatus status = 3;
}

// +kubebuilder:object:root=true
// AccountList represent list of accounts.
message AccountList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Account items = 2;
}

// AccountSpec defines the desired state of an Account
message AccountSpec {
  // The reference to the tenant which the object exists under
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 1;

  // The type of Account, which can be a user or a group
  // +kubebuilder:default:=user
  // +kubebuilder:validation:Optional
  optional string type = 3;

  // The username of the account, which can be used to log into Modela
  // +kubebuilder:validation:MinLength=4
  // +kubebuilder:validation:MaxLength=64
  // +kubebuilder:validation:Required
  // +required
  optional string username = 4;

  // The first name of the person using the Account
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  // +kubebuilder:validation:MaxLength=64
  optional string firstName = 5;

  // The last name of the person using the Account
  // +kubebuilder:default:=""
  // +kubebuilder:validation:MaxLength=64
  // +kubebuilder:validation:Optional
  optional string lastName = 6;

  // The e-mail address of the person using the Account
  // +kubebuilder:default:=""
  // +kubebuilder:validation:MaxLength=64
  // +kubebuilder:validation:Required
  // +required
  optional string email = 7;

  // The phone number of the person using the Account
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  // +kubebuilder:validation:MaxLength=64
  optional string phone = 8;

  // Indicates if the Account has admin permissions. Admin accounts have unrestricted access to all resources and
  // full control to modify and create other Accounts
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool admin = 9;

  // Indicates if the Account is a team account
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool team = 10;

  // MemberOf specifies the name of the team that the Account belongs to. An account can belong to one other team Account
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string memberOf = 11;

  // Indicates if an e-mail will be sent to the address specified by the Email field, that notifies the Account owner
  // about the creation of the Account
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool emailPassword = 12;

  // Indicates if the Account owner will be prompted to reset their password upon login
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool resetPassword = 13;

  // The clearance level of the account. Accounts which do not have a clearance level greater than or equal to the
  // clearance level of a DataProduct will not have access to their namespace
  // +kubebuilder:default:=unclassified
  // +kubebuilder:validation:Optional
  optional string clearanceLevel = 17;

  // The specification for the Account avatar image
  // +kubebuilder:validation:Optional
  optional AvatarSpec avatar = 18;

  // The collection of DataProduct names that will be displayed with priority on the tenant dashboard for the Account
  // +kubebuilder:validation:Optional
  repeated string favoriteProducts = 19;

  // +kubebuilder:validation:Optional
  repeated APITokenSpec tokens = 20;
}

// AccountStatus defines the actual state of the api object
message AccountStatus {
  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 1;

  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 2;

  // In the case of failure, the Account resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // In the case of failure, the Account resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;

  // Total models owned by this user
  // +kubebuilder:validation:Optional
  optional int32 modelsCount = 5;

  // Total model classes owned by this user
  // +kubebuilder:validation:Optional
  optional int32 modelClassesCount = 6;

  // Total number of feature groups that this user is owner of.
  // +kubebuilder:validation:Optional
  optional int32 predictorsCount = 7;

  // Total number of feature groups that this user is responsible for.
  // +kubebuilder:validation:Optional
  optional int32 featureGroupsCount = 8;

  // Total number of feature groups that this user is responsible for.
  // +kubebuilder:validation:Optional
  optional int32 datasetsCount = 9;

  // If group, this is the total members.
  // +kubebuilder:validation:Optional
  optional int32 membersCount = 10;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 11;
}

message AirTableSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message AirWriteSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:resource:path=alerts,singular=alert,categories={infra,modela}
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Status",type="string",JSONPath=".status.phase",description=""
// +kubebuilder:printcolumn:name="Level",type="string",JSONPath=".spec.level",description=""
// +kubebuilder:printcolumn:name="Subject",type="string",JSONPath=".spec.subject",description=""
// +kubebuilder:printcolumn:name="Entity Namespace",type="string",JSONPath=".spec.entityRef.namespace",description="",priority=1
// +kubebuilder:printcolumn:name="Entity Name",type="string",JSONPath=".spec.entityRef.name",description="",priority=1
// +kubebuilder:printcolumn:name="Notifier",type="string",JSONPath=".spec.notifierName",description="",priority=1
// +kubebuilder:printcolumn:name="FiredAt",type="date",JSONPath=".status.at",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// Alert represents temporal information about an event that occurred with a Modela custom resource
message Alert {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional AlertSpec spec = 2;

  // +optional
  optional AlertStatus status = 3;
}

// AlertList is a list of Alerts
// +kubebuilder:object:root=true
message AlertList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Alert items = 2;
}

// AlertSpec defines the contents of an Alert. Alerts are generated by Modela resource controllers and should
// not be created manually.
message AlertSpec {
  // The subject of the Alert
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string subject = 1;

  // The message of the Alert
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string message = 2;

  // The significance of the Alert, which can be normal, warning, or error
  // +kubebuilder:default:="normal"
  // +kubebuilder:validation:Optional
  optional string level = 3;

  // The entity which the Alert is in reference to
  optional k8s.io.api.core.v1.ObjectReference entityRef = 4;

  // The name of the Notifier resource that exists in the same tenant as the Alert which the contents of the
  // Alert will be forwarded to
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Required
  optional string notifierName = 5;

  // The name of the Account which owns the resource that the Alert references
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 6;

  // The time-to-live of the Alert, after which the Alert will be archived
  // +kubebuilder:default:=3600
  // +kubebuilder:validation:Optional
  optional int32 ttl = 7;

  // Additional key-value information about the event
  // +kubebuilder:validation:Optional
  map<string, string> fields = 8;

  // The URL of the subject
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string url = 9;

  // The URL of an image in reference to the Alert
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string image = 10;

  // The reference to the tenant which the object exists under
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 11;
}

// AlertStatus is the observed state of an Alert
message AlertStatus {
  // The time when the Alert was fired
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time firedAt = 2;

  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 3;

  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 4;

  // In the case of failure, the Alert resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 5;

  // In the case of failure, the Alert resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 6;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 7;
}

message AliCloudSpec {
  // +kubebuilder:default:=""
  optional string accessKey = 1;

  // +kubebuilder:default:=""
  optional string secretKey = 2;

  // +kubebuilder:default:=""
  optional string region = 3;

  // +kubebuilder:default:=""
  optional string host = 4;
}

// AthenaSpec defines the connection to Athena db
message AmazonAthenaSpec {
  // +kubebuilder:default:=""
  optional string hostName = 1;

  // UserName
  // +kubebuilder:default:=""
  optional string username = 2;

  // +kubebuilder:default:=""
  optional string password = 3;

  // +kubebuilder:default:=""
  optional string region = 4;

  // +kubebuilder:default:=""
  optional string url = 5;
}

message AmazonRedShiftSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5439
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 6;

  // AWS Region
  optional string region = 7;

  // redshift cluster id
  optional string clusterID = 8;

  // s3 staging location
  optional string s3StagingLocation = 9;

  // IAM Role
  optional string iamRole = 10;
}

// CassandraSpec defines the connection to cassandra
message ApacheCassandraSpec {
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  optional string keyspace = 3;

  optional string username = 4;

  optional string password = 5;

  optional string protocolVersion = 6;

  optional string localDC = 7;

  optional string loadBalancePolicy = 8;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 9;
}

// ApacheDruid
message ApacheDrillSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

// ApacheDruid defines the connection to Apache Druid
message ApacheDruidSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message ApacheHiveSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=10000
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string schema = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message ApacheSparkSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5433
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string schema = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=attachments,singular=attachment,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Entity Namespace",type="string",JSONPath=".spec.entityRef.name",description=""
// +kubebuilder:printcolumn:name="Entity Name",type="string",JSONPath=".spec.entityRef.namespace",description=""
// +kubebuilder:printcolumn:name="Bucket",type="string",JSONPath=".spec.bucketName",description=""
// +kubebuilder:printcolumn:name="Path",type="string",JSONPath=".spec.path",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// Attachment represent an file attached to a resource.
message Attachment {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional AttachmentSpec spec = 2;

  // +optional
  optional AttachmentStatus status = 3;
}

// +kubebuilder:object:root=true
// AttachmentList is a list of Attachments
message AttachmentList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Attachment items = 2;
}

// AttachmentSpec defines the desired state of Attachment
message AttachmentSpec {
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 1;

  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string description = 2;

  // Entity ref
  optional k8s.io.api.core.v1.ObjectReference entityRef = 3;

  // +kubebuilder:default:=""
  // Bucketname is the name of the bucket
  // +kubebuilder:validation:Optional
  optional string bucketName = 4;

  // Path to the full data file (e.g. csv file).
  // +kubebuilder:validation:Optional
  optional string path = 5;

  // TenantRef is the commit tenant
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 6;
}

// AttachmentStatus is the observed state of a Attachment
message AttachmentStatus {
  // ObservedGeneration is the Last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // Last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 2;

  // UpdateUpdateStrategy in case of terminal failure
  // Borrowed from cluster api controller
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 5;
}

// AvatarSpec specifies the location of an avatar for an Account
message AvatarSpec {
  // +kubebuilder:default:=""
  // BucketName is the name of the VirtualBucket resource that exists on the same tenant as the Account
  // +kubebuilder:validation:Optional
  optional string bucketName = 1;

  // Path specifies the path to an image file on the VirtualBucket (e.g. a PNG file)
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string path = 2;
}

// //////////////////////////
// Cloud connection
// //////////////////////////
message AwsS3Spec {
  // Default zone.
  // +kubebuilder:default:=""
  optional string defaultRegion = 1;

  // Aws Access key. This is an hidden fields which are stored in the secret
  // +kubebuilder:default:=""
  optional string accessKey = 2;

  // Aws StorageSecret key. This is an hidden fields which are stored in the secret
  // +kubebuilder:default:=""
  optional string secretKey = 3;
}

// CassandraSpec defines the connection to cassandra
message AzureSQLDatabaseSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 1433
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string database = 5;

  // +kubebuilder:default:=""
  optional string url = 6;
}

message AzureStorageSpec {
  // +kubebuilder:default:=""
  optional string storageAccount = 1;

  // This is an hidden field which is stored in a p
  // +kubebuilder:default:=""
  optional string accessKey = 2;
}

message BitbucketSpec {
  // +kubebuilder:default:=""
  optional string token = 1;

  // +kubebuilder:default:=""
  optional string username = 2;

  // +kubebuilder:default:=""
  optional string ssh = 3;
}

message BoxSpec {
  // +kubebuilder:default:=""
  optional string token = 1;
}

message BucketResourceQuotas {
  // Indicates if the resource quota is enabled
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool enabled = 1;

  // The maximum amount of storage the bucket may use
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.api.resource.Quantity hardLimit = 2;
}

message ClickHouseSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=8123
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 6;
}

message CockroachDBSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5432
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:resource:path=connections,shortName=conn,singular=connection,categories={infra,modela}
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Provider",type="string",JSONPath=".spec.provider",description=""
// +kubebuilder:printcolumn:name="Category",type="string",JSONPath=".spec.category",description=""
// +kubebuilder:printcolumn:name="Secret",type="string",JSONPath=".spec.secretRef.name",description="",priority=1
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// Connection define a connection to an external system (e.g. database, public cloud)
message Connection {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional ConnectionSpec spec = 2;

  // +optional
  optional ConnectionStatus status = 3;
}

// +kubebuilder:object:root=true
// ConnectionList is a list of Connections.
message ConnectionList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Connection items = 2;
}

// ConnectionSpec defines the desired state of a Connection
message ConnectionSpec {
  // The reference to the Tenant which owns the DataProduct. Defaults to `default-tenant`
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 1;

  // The type of external system which the connection references
  // +kubebuilder:default:="general"
  // +kubebuilder:validation:Optional
  optional string category = 2;

  // Provider specifies the name api provider (E.g. aws)
  // +kubebuilder:validation:Required
  // +required
  optional string provider = 3;

  // The reference to the secret which stores the sensitive credentials required to connect to the external system
  // +kubebuilder:validation:Required
  // +required
  optional k8s.io.api.core.v1.SecretReference secretRef = 4;

  // +kubebuilder:validation:Optional
  optional AmazonAthenaSpec athena = 5;

  // +kubebuilder:validation:Optional
  optional ApacheDrillSpec drill = 6;

  // +kubebuilder:validation:Optional
  optional ApacheDruidSpec druid = 7;

  // +kubebuilder:validation:Optional
  optional ApacheHiveSpec hive = 8;

  // +kubebuilder:validation:Optional
  optional AmazonRedShiftSpec redshift = 9;

  // +kubebuilder:validation:Optional
  optional DremioSpec dremio = 10;

  // +kubebuilder:validation:Optional
  optional DB2Spec db2 = 11;

  // +kubebuilder:validation:Optional
  optional GcpBigQuerySpec bigquery = 12;

  // +kubebuilder:validation:Optional
  optional ApacheCassandraSpec cassandra = 13;

  // +kubebuilder:validation:Optional
  optional AzureSQLDatabaseSpec azuresqldatabase = 14;

  // +kubebuilder:validation:Optional
  optional MongoDbSpec mongodb = 15;

  // +kubebuilder:validation:Optional
  optional MySqlSpec mysql = 16;

  // +kubebuilder:validation:Optional
  optional OdbcSpec odbc = 17;

  // +kubebuilder:validation:Optional
  optional OracleSpec oracle = 18;

  // +kubebuilder:validation:Optional
  optional PostgresSQLSpec postgres = 19;

  // +kubebuilder:validation:Optional
  optional PrestoSpec presto = 20;

  // +kubebuilder:validation:Optional
  optional SnowflakeSpec snowflake = 22;

  // +kubebuilder:validation:Optional
  optional SybaseSpec sybase = 23;

  // +kubebuilder:validation:Optional
  optional VerticaSpec vertica = 24;

  // +kubebuilder:validation:Optional
  optional CockroachDBSpec cockroachdb = 25;

  // +kubebuilder:validation:Optional
  optional ElasticSearchSpec elasticsearch = 26;

  // +kubebuilder:validation:Optional
  optional InformixSpec informix = 27;

  // +kubebuilder:validation:Optional
  optional SAPHanaSpec hana = 28;

  // +kubebuilder:validation:Optional
  optional TeradataSpec teradata = 29;

  // +kubebuilder:validation:Optional
  optional GcpSpannerSpec spanner = 30;

  // +kubebuilder:validation:Optional
  optional ApacheSparkSpec spark = 31;

  // +kubebuilder:validation:Optional
  optional MSSqlServerSpec mssqlserver = 32;

  // +kubebuilder:validation:Optional
  optional ClickHouseSpec clickhouse = 33;

  // +kubebuilder:validation:Optional
  optional GreenPlumSpec greenplum = 34;

  // +kubebuilder:validation:Optional
  optional CouchbaseSpec couchbase = 35;

  // +kubebuilder:validation:Optional
  optional ExasolSpec exasol = 36;

  // +kubebuilder:validation:Optional
  optional SqliteSpec sqlite = 37;

  // +kubebuilder:validation:Optional
  optional SingleStoreSpec singlestore = 38;

  // +kubebuilder:validation:Optional
  optional GoogleSheetsSpec gsheets = 39;

  // +kubebuilder:validation:Optional
  optional AzureStorageSpec azurestorage = 40;

  // +kubebuilder:validation:Optional
  optional AliCloudSpec alicloud = 41;

  // +kubebuilder:validation:Optional
  optional DigitalOceanSpec digitalocean = 42;

  // +kubebuilder:validation:Optional
  optional HetznerSpec hetzner = 43;

  // +kubebuilder:validation:Optional
  optional GcpStorageSpec gcpstorage = 45;

  // +kubebuilder:validation:Optional
  optional LinodeSpec linode = 46;

  // +kubebuilder:validation:Optional
  optional MinioSpec minio = 47;

  // +kubebuilder:validation:Optional
  optional OpenstackSpec openstack = 48;

  // +kubebuilder:validation:Optional
  optional OvhSpec ovh = 49;

  // +kubebuilder:validation:Optional
  optional AwsS3Spec aws = 50;

  // +kubebuilder:validation:Optional
  optional SmtpSpec smtp = 51;

  // +kubebuilder:validation:Optional
  optional FtpSpec ftp = 52;

  // +kubebuilder:validation:Optional
  optional SFtpSpec sftp = 53;

  // +kubebuilder:validation:Optional
  optional DropboxSpec dropbox = 54;

  // +kubebuilder:validation:Optional
  optional BoxSpec box = 55;

  // +kubebuilder:validation:Optional
  optional ImageRegistrySpec imageRegistry = 56;

  // +kubebuilder:validation:Optional
  optional GithubSpec github = 57;

  // +kubebuilder:validation:Optional
  optional GitlabSpec gitlab = 58;

  // +kubebuilder:validation:Optional
  optional BitbucketSpec bitbucket = 59;

  // +kubebuilder:validation:Optional
  optional SlackSpec slack = 60;

  // +kubebuilder:validation:Optional
  optional MSTeamSpec msteam = 61;

  // +kubebuilder:validation:Optional
  optional MattermostSpec matterMost = 62;

  // +kubebuilder:validation:Optional
  optional HipchatSpec hipchat = 63;

  // +kubebuilder:validation:Optional
  optional VictorOpSpec victorop = 64;

  // +kubebuilder:validation:Optional
  optional PagerDutySpec pagerduty = 65;

  // +kubebuilder:validation:Optional
  optional PushoverSpec pushover = 66;

  // +kubebuilder:validation:Optional
  optional OpsgenieSpec opsgenie = 67;

  // +kubebuilder:validation:Optional
  optional WebhookSpec webhook = 68;

  // Social media
  // +kubebuilder:validation:Optional
  optional FacebookSpec facebook = 69;

  // +kubebuilder:validation:Optional
  optional TwitterSpec twitter = 70;

  // +kubebuilder:validation:Optional
  optional RabbitMQSpec rabbitmq = 71;

  // +kubebuilder:validation:Optional
  optional KafkaSpec kafka = 72;

  // +kubebuilder:validation:Optional
  optional Neo4JSpec neo4j = 73;

  // +kubebuilder:validation:Optional
  optional DiscordSpec discord = 74;

  // +kubebuilder:validation:Optional
  optional InfluxDBSpec influx = 75;

  // +kubebuilder:validation:Optional
  optional TimescaleDBSpec timescale = 76;

  // +kubebuilder:validation:Optional
  optional VictoriaMetricsSpec victoriaMetrics = 77;

  // +kubebuilder:validation:Optional
  optional SaleforceSpec saleforce = 78;

  // +kubebuilder:validation:Optional
  optional SapCRMSpec sapCrm = 79;

  // +kubebuilder:validation:Optional
  optional AirTableSpec airtable = 80;

  // +kubebuilder:validation:Optional
  optional AirWriteSpec appWrite = 81;

  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 82;
}

// ConnectionStatus is the observed state of a Connection
message ConnectionStatus {
  // ObservedGeneration is the Last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // Last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 2;

  // UpdateUpdateStrategy in case of terminal failure
  // Borrowed from cluster api controller
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 5;
}

message CouchbaseSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=8123
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string defaultBucket = 6;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 7;
}

message DB2Spec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message DigitalOceanSpec {
  // Token for digital ocean
  // +kubebuilder:default:=""
  optional string token = 1;

  // Access Key for digital ocean spaces
  // +kubebuilder:default:=""
  optional string accessKey = 2;

  // StorageSecret Key for digital ocean spaces
  // +kubebuilder:default:=""
  optional string secretKey = 3;

  // Default digital ocean
  // +kubebuilder:default:=""
  optional string defaultRegion = 4;

  // url or connection string
  // +kubebuilder:default:=""
  optional string host = 5;
}

message DiscordSpec {
  // Discrod webhook
  // +kubebuilder:default:=""
  optional string url = 1;

  // Content type
  // +kubebuilder:default:="application/json"
  optional string contentType = 2;

  // The webhook secret token
  optional string token = 3;

  // custom headers to send
  map<string, string> headers = 4;

  // +kubebuilder:default:=false
  optional bool ssl = 5;
}

message DremioSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message DropboxSpec {
  // +kubebuilder:default:=""
  optional string token = 1;
}

message ElasticSearchSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5432
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string prefix = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message ExasolSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 7;
}

message FTPSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message FacebookSpec {
  // +kubebuilder:default:=""
  optional string token = 1;
}

// Specifiction for an online feature store
message FeatureStoreSpec {
  // The name of the online feature store.
  // +kubebuilder:validation:Optional
  optional string name = 1;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference connectionRef = 2;
}

message FeatureStoreStatus {
  // Feature store name
  optional string name = 1;

  // Last check of the feature store status
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastUpdated = 2;

  // UpdateUpdateStrategy in case of terminal failure
  // Borrowed from cluster api controller
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;
}

message FtpSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 21
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;
}

// BigQuerySpec defines the connection to Google BigQuery
message GcpBigQuerySpec {
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // UserName
  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;

  // +kubebuilder:default:=""
  optional string projectID = 5;

  // +kubebuilder:default:=""
  optional string oauthType = 6;

  // +kubebuilder:default:=""
  optional string serviceAccountKeyPath = 7;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 8;
}

message GcpSpannerSpec {
  // +kubebuilder:default:=""
  optional string project = 1;

  // +kubebuilder:default:=""
  optional string instance = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;

  // +kubebuilder:default:=""
  optional string database = 5;

  // URL Override the other
  optional string url = 6;
}

message GcpStorageSpec {
  // +kubebuilder:default:=""
  optional string keyFile = 1;

  // +kubebuilder:default:=""
  optional string project = 2;
}

message GithubSpec {
  // +kubebuilder:default:=""
  optional string token = 1;

  // +kubebuilder:default:=""
  optional string username = 2;

  // +kubebuilder:default:=""
  optional string ssh = 3;
}

message GitlabSpec {
  // +kubebuilder:default:=""
  optional string token = 1;

  // +kubebuilder:default:=""
  optional string ssh = 2;
}

message GoogleSheetsSpec {
  // +kubebuilder:default:=""
  optional string scopes = 1;

  // +kubebuilder:default:= ""
  optional string id = 2;

  // +kubebuilder:default:=""
  optional string dataToPull = 3;
}

message GreenPlumSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5432
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 6;
}

message HetznerSpec {
  // +kubebuilder:default:=""
  optional string token = 1;

  // +kubebuilder:default:=""
  optional string ssh = 2;
}

message HipchatSpec {
  // +kubebuilder:default:=""
  optional string url = 1;

  // +kubebuilder:default:=""
  optional string token = 2;

  // +kubebuilder:default:=""
  optional string room = 3;
}

message ImageRegistrySpec {
  // Hostname for the image registry
  // +kubebuilder:default:=""
  optional string host = 1;

  // Username for image registry
  // +kubebuilder:default:=""
  optional string username = 2;

  // +kubebuilder:default:=""
  optional string password = 3;
}

message InfluxDBSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message InformixSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=1526
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

// IngressSpec defines the configuration to for a ServingSite to create Ingress resources
message IngressSpec {
  // FQDN specifies the fully-qualified domain name that the ServingSite's Ingress will use as the base host for the
  // endpoint of services deployed under the ServingSite. For example, setting the FQDN as `model-serving.modela.ai`
  // will automatically serve Predictors using the REST API at `predictors.model-serving.modela.ai`
  // +kubebuilder:default:="serving.vcap.me"
  // +kubebuilder:validation:Optional
  optional string fqdn = 1;

  // Grpc indicates if the ServingSite will create an Ingress resource to serve GRPC prediction traffic.
  // All Predictor resources created under the ServingSite will receive a unique host in the Ingress
  // determined by the name of the Predictor and the FQDN of the ServingSite (i.e. my-predictor.model-serving.modela.ai)
  // +kubebuilder:default:=true
  // +kubebuilder:validation:Optional
  optional bool grpc = 2;

  // Rest indicates if the ServingSite will create an Ingress resource to serve REST prediction traffic.
  // All REST traffic will be served under a single host determined by the FQDN of the ServingSite
  // (i.e. predictors.model-serving.modela.ai). RestIngress must be enabled to serve DataApps over Ingress
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool rest = 3;

  // IngressClassName is the name of the ingress class that will be applied to created Ingress resources
  // (defaults to nginx)
  // +kubebuilder:default:="nginx"
  optional string ingressClassName = 4;

  // IssuerName specifies the name of a cert-manager Issuer resource in the same namespace as the Serving Site
  // that will provide a TLS certificate to the ingress. This will be added as an annotation to the ingress.
  optional string issuerName = 5;

  // ClusterIssuerName specifies the name of a cert-manager ClusterIssuer resource
  // that will provide a TLS certificate to the ingress. This will be added as an annotation to the ingress.
  // +kubebuilder:default:=""
  optional string clusterIssuerName = 6;

  // TlsSecretName specifies the name of the secret that contains the TLS certificate for the ingress.
  // If it does not exist, ClusterIssuerName or IssuerName must be specified for Cert Manager to
  // generate the serving certificate
  // +kubebuilder:validation:Optional
  optional string tlsSecretName = 7;
}

message KafkaSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string channel = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:resource:path=labs,singular=lab,categories={infra,modela,all}
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Owner",type="string",JSONPath=".spec.owner"
// +kubebuilder:printcolumn:name="Cluster",type="string",JSONPath=".spec.clusterName"
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp"
// Lab represents a single namespace where data analysis and model training workloads take place
message Lab {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional LabSpec spec = 2;

  // +optional
  optional LabStatus status = 3;
}

// +kubebuilder:object:root=true
// LabList is the list of Labs
message LabList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Lab items = 2;
}

// LabSpec defines the desired state of a Lab
message LabSpec {
  // The user-provided description of the Lab
  // +kubebuilder:validation:Optional
  // +kubebuilder:default:=""
  // +kubebuilder:validation:MaxLength=256
  optional string description = 1;

  // +kubebuilder:validation:Optional
  // The reference to the tenant which the object exists under
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 2;

  // Limits specifies the hard resource limits that can be allocated for workloads created under the Lab
  // +kubebuilder:validation:Optional
  optional ResourceLimitSpec limits = 3;

  // External cluster specify the spec for execution on a remote cluster.
  // +kubebuilder:validation:Optional
  optional VirtualClusterSpec externalCluster = 4;

  // The name of the Account which created the object, which exists in the same tenant as the object
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 5;
}

// LabStatus is the observed state of a Lab
message LabStatus {
  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 2;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:resource:path=licenses,singular=license,categories={infra,modela}
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Valid\")].status",description=""
// +kubebuilder:printcolumn:name="Owner",type="string",JSONPath=".spec.owner",description=""
// +kubebuilder:printcolumn:name="Secret",type="string",JSONPath=".spec.secretRef.name",description=""
// +kubebuilder:printcolumn:name="Trial Start",type="string",JSONPath=".spec.trialStart",description=""
// +kubebuilder:printcolumn:name="Trial End",type="string",JSONPath=".spec.trialEnd",description=""
// +kubebuilder:printcolumn:name="ExpectedValueMax Trainers",type="string",JSONPath=".spec.maxTrainers",description="",priority=1
// +kubebuilder:printcolumn:name="ExpectedValueMax Nodes",type="string",JSONPath=".spec.maxServers",description="",priority=1
// +kubebuilder:printcolumn:name="ExpectedValueMax Users",type="string",JSONPath=".spec.maxUsers",description="",priority=1
// +kubebuilder:printcolumn:name="Expire FiredAt",type="date",JSONPath=".spec.expireAt",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// License represents the license key and limitations of a cluster-wide license obtained from Modela.ai
message License {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional LicenseSpec spec = 2;

  // +optional
  optional LicenseStatus status = 3;
}

// +kubebuilder:object:root=true
// LicenseList is a list of Licenses
message LicenseList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated License items = 2;
}

// LicenseSpec defines the details of a License. The contents of the specification are derived from
// the actual license key, and changing the specification has no effect on the limitations of the license
message LicenseSpec {
  // The reference to the secret containing the license token
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.SecretReference secretRef = 2;

  // The e-mail address of the Modela.ai account which owns the license
  // +kubebuilder:validation:Optional
  // +kubebuilder:default:=""
  optional string email = 4;

  // TrialStartAt is the start date for of the free trial period, if active
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time trialStartAt = 5;

  // TrialEndAt specifies when the free trial expires, if active
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time trialEndAt = 6;

  // MaxProducts specifies the maximum number of DataProduct across the cluster
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Optional
  optional int32 maxProducts = 7;

  // MaxTrainers specifies the maximum number of parallel trainers that can be active at once
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Optional
  optional int32 maxTrainers = 8;

  // MaxServers specifies the maximum number of Kubernetes nodes that may be utilized at once
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Optional
  optional int32 maxServers = 9;

  // MaxUsers specifies the maximum number of Accounts that can be created across all tenants
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Optional
  optional int32 maxUsers = 10;

  // MaxDataPlanes specifies the maximum number of data plane replicas that may exist at once
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Optional
  optional int32 maxDataPlanes = 11;

  // Forecast indicates if Modela can generate forecasting models
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool forecast = 12;

  // NLP indicates if natural language processing models are supported
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool nlp = 13;

  // Vision indicates if computer vision models are supported
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool vision = 14;

  // Chatbot indicates if chatbot models are supported
  // +kubebuilder:default:=false
  optional bool chatbot = 15;

  // The name of the license product, internal to Modela.ai
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string productName = 16;

  // The name of the license price, internal to Modela.ai
  // +kubebuilder:validation:Optional
  optional string priceName = 17;

  // The date at which the license expires
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time expireAt = 18;

  // The reference to a Notifier resource that receives Alerts for license expiration
  // +kubebuilder:validation:Optional
  optional string notifierName = 19;
}

// LicenseStatus is the observed state of a License
message LicenseStatus {
  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 1;

  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 2;

  // In the case of failure, the License resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // In the case of failure, the License resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 5;
}

message LinodeSpec {
  // +kubebuilder:default:=""
  optional string token = 1;
}

message MSSqlServerSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=1433
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string instance = 4;

  // +kubebuilder:default:=""
  optional string username = 5;

  // +kubebuilder:default:=""
  optional string password = 6;

  // URL Override the other
  optional string url = 7;
}

message MSTeamSpec {
  // +kubebuilder:default:=""
  optional string webhook = 1;
}

message MattermostSpec {
  // +kubebuilder:default:=""
  optional string url = 1;

  // +kubebuilder:default:=""
  optional string channel = 2;

  // +kubebuilder:default:=""
  optional string username = 3;
}

message MinioSpec {
  // Access key for minio
  // +kubebuilder:default:=""
  optional string accessKey = 1;

  // StorageSecret key for minio
  // +kubebuilder:default:=""
  optional string secretKey = 2;

  // Minio url connection.
  // +kubebuilder:default:=""
  optional string host = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=modelasystems,singular=modelasystem,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// ModelaSystem
message ModelaSystem {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional ModelaSystemSpec spec = 2;

  // +optional
  optional ModelaSystemStatus status = 3;
}

// +kubebuilder:object:root=true
// ModelaSystemList is a list of ModelaSystems
message ModelaSystemList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated ModelaSystem items = 2;
}

// ModelaSystemSpec defines the desired state of ModelaSystem
message ModelaSystemSpec {
  // The current software version of modela
  // +kubebuilder:validation:Required
  // +required
  optional string release = 1;

  // Set the release to active
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool active = 2;

  // +kubebuilder:validation:Optional
  // +optional
  optional k8s.io.api.core.v1.PodTemplateSpec podTemplate = 3;

  // +kubebuilder:validation:Optional
  // +optional
  optional k8s.io.api.core.v1.PodTemplateSpec publisherTemplate = 4;
}

// ModelaSystemStatus is the observed state of a ModelaSystem
message ModelaSystemStatus {
  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // UpdateUpdateStrategy in case of terminal failure
  // Borrowed from cluster api controller
  // +kubebuilder:validation:Optional
  optional string failureReason = 2;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 3;

  // +kubebuilder:validation:Optional
  optional string lastRelease = 4;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 5;
}

message MongoDbSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=27017
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // +kubebuilder:default:=""
  optional string url = 6;
}

message MySqlSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=3306
  // +kubebuilder:validation:Minimum=0
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // +kubebuilder:default:=""
  optional string url = 6;
}

message Neo4JSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 7;
}

// NotificationChannelSpec describes a single Connection to an external messaging system and a destination channel within the system
message NotificationChannelSpec {
  // Indicates if the channel is enabled to send forwarded Alerts
  // +kubebuilder:default:= true
  // +kubebuilder:validation:Optional
  optional bool enabled = 1;

  // The name of the Connection resource which exists in the same tenant as the parent Notifier
  // +kubebuilder:validation:Required
  // +kubebuilder:default:=""
  optional string connectionName = 2;

  // Indicates if the channel will send Alerts with the `info` level
  // +kubebuilder:default:= false
  // +kubebuilder:validation:Optional
  optional bool info = 3;

  // Indicates if the channel will send Alerts with the `error` level
  // +kubebuilder:default:= true
  // +kubebuilder:validation:Optional
  optional bool error = 4;

  // This channel start time
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time from = 5;

  // This channel end time
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time to = 6;

  // The destination channel that exists in the external system that `ConnectionName` references. For example, a Slack
  // channel name, a Discord channel ID, or an e-mail address
  optional string destination = 7;
}

message NotificationChannelStatus {
  // The last time a message was sent on this channel
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time lastMessageAt = 1;

  // In the case of failure, the Notifier resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 2;

  // In the case of failure, the Notifier resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 3;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=notifiers,singular=notifier,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Owner",type="string",JSONPath=".spec.owner",description=""
// +kubebuilder:printcolumn:name="Description",type="string",JSONPath=".spec.description",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// The Notifier resource
message Notifier {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional NotifierSpec spec = 2;

  // +optional
  optional NotifierStatus status = 3;
}

// +kubebuilder:object:root=true
// NotifierList is a list of Notifiers
message NotifierList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Notifier items = 2;
}

// NotifierSpec defines the desired state of a Notifier
message NotifierSpec {
  // Indicates if the Notifier will send notifications
  // +kubebuilder:default:= true
  // +kubebuilder:validation:Optional
  optional bool enabled = 1;

  // The reference to the tenant which the object exists under
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 2;

  // The user provided description of the object
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string description = 3;

  // The name of the Account which created the object, which exists in the same tenant as the object
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 4;

  // Channels specifies the list of notification channels that the Notifier will forward the information from Alerts to.
  // Each channel specifies a Connection resource for an external messaging system, and a destination channel within the system
  // to forward the information from Alerts to
  // +kubebuilder:validation:Optional
  repeated NotificationChannelSpec channels = 5;
}

// NotifierStatus is the observed state of a Notifier
message NotifierStatus {
  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 2;

  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 3;

  // The status of Notification Channels after Alerts have been forwarded to them
  repeated NotificationChannelStatus channelsStatus = 4;

  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 5;
}

message OdbcSpec {
  // +kubebuilder:default:=""
  optional string conntectionString = 1;
}

message OpenstackSpec {
  // +kubebuilder:default:=""
  optional string username = 1;

  // +kubebuilder:default:=""
  optional string tenantName = 2;

  // +kubebuilder:default:=""
  optional string password = 3;

  // +kubebuilder:default:=""
  optional string authUrl = 4;

  // +kubebuilder:default:=""
  optional string region = 5;
}

message OpsgenieSpec {
  // +kubebuilder:default:=""
  optional string apiID = 1;

  // +kubebuilder:default:=""
  optional string apiKey = 2;

  // +kubebuilder:default:=""
  optional string url = 3;
}

message OracleSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=1521
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:="XE"
  optional string sid = 3;

  // +kubebuilder:default:="thin"
  optional string driver = 4;

  // +kubebuilder:default:=""
  optional string username = 5;

  // +kubebuilder:default:=""
  optional string password = 6;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 7;
}

message OvhSpec {
  // +kubebuilder:default:=""
  optional string endpoint = 1;

  // +kubebuilder:default:=""
  optional string application = 2;

  // +kubebuilder:default:=""
  optional string secret = 3;

  // +kubebuilder:default:=""
  optional string consumerkey = 4;
}

message PagerDutySpec {
  // +kubebuilder:default:=""
  optional string apiID = 1;

  // +kubebuilder:default:=""
  optional string apiKey = 2;

  // +kubebuilder:default:=""
  optional string url = 3;
}

message PostgresSQLSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5432
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // Schema
  optional string schema = 4;

  // +kubebuilder:default:=""
  optional string username = 5;

  // +kubebuilder:default:=""
  optional string password = 6;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 7;
}

message PrestoSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=8080
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string catalog = 3;

  // +kubebuilder:default:=""
  optional string schema = 4;

  // +kubebuilder:default:=""
  optional string username = 5;

  // +kubebuilder:default:=""
  optional string password = 6;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 7;
}

message PushoverSpec {
  // +kubebuilder:default:=""
  optional string apiID = 1;

  // +kubebuilder:default:=""
  optional string apiKey = 2;

  // +kubebuilder:default:=""
  optional string url = 3;
}

message RabbitMQSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 21
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;
}

// ResourceLimitSpec defines the resource limits for workloads created under Lab and ServingSite namespaces
message ResourceLimitSpec {
  // Indicates if the resource limit is enabled
  // +kubebuilder:validation:Optional
  // +kubebuilder:default:=false
  optional bool enabled = 1;

  // The maximum quantity of memory that can be consumed under the namespace
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.api.resource.Quantity maxMem = 2;

  // The maximum amount of CPU that can be consumed under the namespace
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.api.resource.Quantity maxCpu = 3;

  // The maximum number of pods that can be created under the namespace
  // +kubebuilder:validation:Optional
  optional int32 maxPods = 4;

  // The maximum number of persistent volume claims that can be created under the namespace
  // +kubebuilder:validation:Optional
  optional int32 maxPvc = 5;

  // QuotaSpec defines the resource quota specification for the namespace
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ResourceQuotaSpec quota = 6;

  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.LimitRangeSpec limitRange = 7;
}

// RuleSpec defines the relation between a resource and the actions that can be performed on the resource
message RuleSpec {
  // The kind of the resource
  optional string resource = 1;

  // List of allowed actions on the resource
  repeated string verbs = 2;
}

message SAPHanaSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=1526
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message SFTPSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message SFtpSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 21
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;
}

message SaleforceSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message SapCRMSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message Scope {
  // +kubebuilder:validation:Optional
  optional string name = 1;

  // +kubebuilder:validation:Optional
  repeated string actions = 2;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=servingsites,singular=servingsite,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Owner",type="string",JSONPath=".spec.owner",description="owner"
// +kubebuilder:printcolumn:name="FQDN",type="string",JSONPath=".spec.ingress.fqdn",description=""
// +kubebuilder:printcolumn:name="GRPC Ingress",type="string",JSONPath=".status.grpcIngressName",description=""
// +kubebuilder:printcolumn:name="REST Ingress",type="string",JSONPath=".status.restIngressName",description=""
// +kubebuilder:printcolumn:name="Predictors",type="number",JSONPath=".status.activePredictors",description=""
// +kubebuilder:printcolumn:name="Cluster",type="string",JSONPath=".spec.clusterName",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// ServingSite represents a namespace where model serving workloads are executed under
message ServingSite {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional ServingSiteSpec spec = 2;

  // +optional
  optional ServingSiteStatus status = 3;
}

// +kubebuilder:object:root=true
// ServingSiteList is a list of ServingSite
message ServingSiteList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated ServingSite items = 2;
}

// ServingSiteSpec defines the desired state of a ServingSite
message ServingSiteSpec {
  // The user-provided description of the object
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string description = 1;

  // The reference to the tenant which the object exists under
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 2;

  // Limits specifies the hard resource limits that can be allocated for workloads created under the ServingSite
  // +kubebuilder:validation:Optional
  optional ResourceLimitSpec limits = 3;

  // Ingress defines the specification to create Ingress resources that can route traffic
  // to the resources which exist under the ServingSite's namespace
  // +kubebuilder:validation:Optional
  optional IngressSpec ingress = 4;

  // External Cluster specify if the serving site will be served on external cluster using the cluster api.
  // assigned to the Lab will be executed inside the cluster (currently not implemented)
  // +kubebuilder:validation:Optional
  optional VirtualClusterSpec externalCluster = 5;

  // The name of the Account which created the object, which exists in the same tenant as the object
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 7;

  // The stage of the serving class
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string stage = 8;
}

message ServingSiteStatus {
  // ObservedGeneration is the last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // The last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 2;

  // The number of active predictor services
  optional int32 activePredictors = 3;

  // The number of inactive (non-deployed) predictors
  optional int32 inactivePredictors = 4;

  // The number of predictor services that have failed/errored
  optional int32 totalPredictorServiceFailed = 5;

  // The number of predictors that have detected a data drift
  optional int32 totalPredictorDataDriftFailed = 6;

  // The number of predictors that have detected average inaccurate results
  optional int32 totalPredictorAccuracyFailed = 7;

  // The collection of predictions from the last 7 days
  repeated int32 dailyPredictionsCounts = 8;

  // In the case of failure, the ServingSite resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 9;

  // In the case of failure, the ServingSite resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 10;

  // GrpcIngressName specifies the name of the Kubernetes Ingress resource which the ServingSite uses to define
  // external access points for resources that accept GRPC-based traffic to their services (i.e. Predictors).
  // This field is set only after one or more resources are created which use the Ingress access method.
  // If there are no Ingress rules to serve then the Ingress will be destroyed
  // +kubebuilder:validation:Optional
  optional string grpcIngressName = 11;

  // RestIngressName specifies the name of the Kubernetes Ingress resource which the ServingSite uses to define
  // external access points for resources that accept HTTP-based traffic to their services (i.e. DataApps).
  // This field is set only after one or more resources are created which use the Ingress access method to serve REST traffic.
  // If there are no Ingress rules to serve then the Ingress will be destroyed
  optional string restIngressName = 12;

  // Store the status of the grpc ingress
  optional bool grpcIngressReady = 13;

  // Status of rest ingress.
  optional bool restIngressReady = 14;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 15;
}

message SingleStoreSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  // +kubebuilder:default:=""
  optional string url = 7;
}

message SlackSpec {
  // +kubebuilder:default:=""
  optional string token = 4;
}

message SmtpSpec {
  // SMTP server Host
  // +kubebuilder:default:=""
  optional string host = 1;

  // SMTP Server Port
  // +kubebuilder:default:=25
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // The SMTP domain name
  // +kubebuilder:default:=""
  optional string helo = 3;

  // The smtp email
  optional string email = 4;

  // Use SSL when connecting to SMTP server
  // +kubebuilder:default:=false
  optional bool ssl = 5;

  // +kubebuilder:default:=false
  optional bool verifyPeer = 6;

  // +kubebuilder:default:=false
  optional bool verifyHost = 7;

  // Use user name password auth
  // +kubebuilder:default:=true
  optional bool passwordAuth = 8;

  // User name when using user name and password
  optional string username = 9;

  // Password when using user name and password
  // +kubebuilder:default:=""
  optional string password = 10;
}

message SnowflakeSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=443
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string username = 3;

  // +kubebuilder:default:=""
  optional string password = 4;

  // +kubebuilder:default:=""
  optional string database = 5;

  // +kubebuilder:default:=""
  optional string schema = 6;

  // +kubebuilder:default:=""
  optional string warehouse = 7;

  // +kubebuilder:default:=""
  optional string role = 8;

  // URL Override the other
  optional string url = 9;
}

message SqliteSpec {
  // +kubebuilder:default:="general"
  optional string fileName = 1;
}

message SybaseSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5000
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=tenants,singular=tenant,categories={infra,modela}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Default Lab",type="string",JSONPath=".spec.defaultLabRef.Name",description=""
// +kubebuilder:printcolumn:name="Default Serving Site",type="string",JSONPath=".spec.defaultServingSiteRef.Name",description=""
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// Tenant represents a root namespace for tenant-level resources and child DataProduct namespaces
message Tenant {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional TenantSpec spec = 2;

  // +optional
  optional TenantStatus status = 3;
}

// TenantList represent a list of Tenants
// +kubebuilder:object:root=true
message TenantList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated Tenant items = 2;
}

// TenantSpec defines the desired state of a Tenant
message TenantSpec {
  // The reference to the Lab resource that will be used as a default when creating new DataProduct namespaces
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference defaultLab = 1;

  // The reference to the ServingSite resource that will be used as a default when creating new DataProduct namespaces
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference defaultServingSiteRef = 2;

  // The user-provided description of the Tenant
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  // +kubebuilder:validation:MaxLength=512
  // +kubebuilder:validation:Optional
  optional string description = 3;

  // Owner indicates the name of the Account under the Tenant which created the Tenant (i.e. the Tenant administrator)
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 4;

  // The default bucket name for tenant artifacts
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string bucketName = 5;

  // The root path to
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string path = 6;

  // Permissions denotes the specification that determines which Accounts
  // can access the resources under the Tenant namespace and what actions they can perform
  // +kubebuilder:validation:Optional
  optional github.com.metaprov.modelaapi.pkg.apis.catalog.v1alpha1.PermissionsSpec permissions = 7;

  // The default notification specification for all resources under the tenant
  // +kubebuilder:validation:Optional
  optional github.com.metaprov.modelaapi.pkg.apis.catalog.v1alpha1.NotificationSpec notification = 8;

  // The connection to the online feature store for the tenant.
  // The online store serves all the feature groups for this tenant.
  // +kubebuilder:validation:Optional
  optional FeatureStoreSpec online = 9;

  // The connection to the offline feature store. This feature store holds the observations as well as the feature groups.
  // +kubebuilder:validation:Optional
  optional FeatureStoreSpec offline = 10;

  // The connection to the metrics store. The metrics store hold the metadata about objects in the system (e.g. models)
  // The metrics store is used for reports and general analytics.
  // +kubebuilder:validation:Optional
  optional FeatureStoreSpec metrics = 11;
}

// TenantStatus defines the actual state of a Tenant
message TenantStatus {
  // ObservedGeneration is the Last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 1;

  // Last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 2;

  // UpdateUpdateStrategy in case of terminal failure
  // Borrowed from cluster api controller
  // +kubebuilder:validation:Optional
  optional string failureReason = 3;

  // UpdateUpdateStrategy in case of terminal failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 4;

  // the status of the online store
  // +kubebuilder:validation:Optional
  optional FeatureStoreStatus online = 5;

  // the status of the offline store
  // +kubebuilder:validation:Optional
  optional FeatureStoreStatus offline = 6;

  // the status of the metrics store
  // +kubebuilder:validation:Optional
  optional FeatureStoreStatus metrics = 7;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 8;
}

message TeradataSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=6666
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message TimescaleDBSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

message TwitterSpec {
  // +kubebuilder:default:=""
  optional string token = 1;
}

// +kubebuilder:storageversion
// +kubebuilder:resource:path=userroleclasses,singular=userroleclass,categories={infra,modela,all}
// +kubebuilder:object:root=true
// UserRoleClass specifies the permissions that can be performed on a set of resources
message UserRoleClass {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional UserRoleClassSpec spec = 2;
}

// UserRoleClassList contains a list of UserRoleClasses
// +kubebuilder:object:root=true
message UserRoleClassList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated UserRoleClass items = 2;
}

// UserRoleClassSpec contains the permissions for a UserRoleClass
message UserRoleClassSpec {
  // The owner of the user role class
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 1;

  // The description of the user role class.
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string description = 2;

  // The name of the Account which created the object, which exists in the same tenant as the object
  // +kubebuilder:default:="admin"
  // +kubebuilder:validation:Optional
  optional string owner = 3;

  // The collection of rules, consisting of a resource and the actions that can be performed on the resource
  // +kubebuilder:validation:Optional
  repeated RuleSpec rules = 4;
}

message VerticaSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:=5433
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string database = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL Override the other
  optional string url = 6;
}

message VictorOpSpec {
  // +kubebuilder:default:=""
  optional string apiID = 1;

  // +kubebuilder:default:=""
  optional string apiKey = 2;

  // +kubebuilder:default:=""
  optional string url = 3;
}

message VictoriaMetricsSpec {
  // +kubebuilder:default:=""
  optional string host = 1;

  // +kubebuilder:default:= 9042
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=65535
  optional int32 port = 2;

  // +kubebuilder:default:=""
  optional string keyspace = 3;

  // +kubebuilder:default:=""
  optional string username = 4;

  // +kubebuilder:default:=""
  optional string password = 5;

  // URL override the other settings
  // +kubebuilder:default:=""
  optional string url = 6;
}

// +kubebuilder:object:root=true
// +kubebuilder:resource:path=virtualbuckets,shortName=vb,singular=virtualbucket,categories={infra,modela,all}
// +kubebuilder:subresource:status
// +kubebuilder:storageversion
// +kubebuilder:printcolumn:name="Ready",type="string",JSONPath=".status.conditions[?(@.type==\"Ready\")].status",description=""
// +kubebuilder:printcolumn:name="Owner",type="string",JSONPath=".spec.owner",description="owner"
// +kubebuilder:printcolumn:name="Connection",type="string",JSONPath=".spec.connectionName",description="virtual bucket connections"
// +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp",description=""
// VirtualBucket represents an abstract object storage system used to store flat-files
message VirtualBucket {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ObjectMeta metadata = 1;

  optional VirtualBucketSpec spec = 2;

  // +optional
  optional VirtualBucketStatus status = 3;
}

// VirtualBucketList is a list of VirtualBuckets
// +kubebuilder:object:root=true
message VirtualBucketList {
  optional k8s.io.apimachinery.pkg.apis.meta.v1.ListMeta metadata = 1;

  repeated VirtualBucket items = 2;
}

// VirtualBucketSpec defines the desired state of VirtualBucket
message VirtualBucketSpec {
  // The reference to the tenant which the object exists under
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference tenantRef = 1;

  // The name of the Connection resource which exists under the same tenant as the object. The Connection
  // should represent the external location and access credentials of an object storage system
  // +kubebuilder:validation:Required
  // +kubebuilder:validation:MaxLength=64
  // +kubebuilder:default:=""
  optional string connectionName = 2;

  // User-provided description of the object
  // +kubebuilder:validation:MaxLength=512
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string description = 3;

  // The name of the Account which created the object, which exists in the same tenant as the object
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 4;

  // For cloud based bucket, this is the region of the bucket
  // In the case of a cloud-based Connection, Region specifies the region of the bucket
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string region = 5;

  // If true, the bucket supports versioning, which applies to the S3 API. See
  // https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html for more information
  // +kubebuilder:default:=false
  // +kubebuilder:validation:Optional
  optional bool versioning = 6;

  // The resource quotas of the bucket, which can restrict how much storage the bucket may use
  // +kubebuilder:validation:Optional
  optional BucketResourceQuotas quotas = 7;
}

// VirtualBucketStatus defines the observed state of a VirtualBucket
message VirtualBucketStatus {
  // Last time the object was updated
  // +kubebuilder:validation:Optional
  optional k8s.io.apimachinery.pkg.apis.meta.v1.Time updatedAt = 1;

  // ObservedGeneration is the Last generation that was acted on
  // +kubebuilder:validation:Optional
  optional int64 observedGeneration = 3;

  // In the case of failure, the VirtualBucket resource controller will set this field with a failure reason
  // +kubebuilder:validation:Optional
  optional string failureReason = 4;

  // In the case of failure, the VirtualBucket resource controller will set this field with a failure message
  // +kubebuilder:validation:Optional
  optional string failureMessage = 5;

  // +patchMergeKey=type
  // +patchStrategy=merge
  // +kubebuilder:validation:Optional
  repeated k8s.io.apimachinery.pkg.apis.meta.v1.Condition conditions = 6;
}

message VirtualClusterSpec {
  // Indicates if the lab should run on its own virtual cluster.
  // Currently not supported
  // +kubebuilder:validation:Optional
  // +kubebuilder:default:=false
  optional bool enabled = 1;

  // Description is the user provided description
  // +kubebuilder:default:=""
  // +optional
  optional string description = 2;

  // Nodes is the desired number of nodes
  // +kubebuilder:default:=1
  // +kubebuilder:validation:Minimum=1
  // +kubebuilder:validation:Maximum=10
  // +kubebuilder:validation:Optional
  optional int32 nodes = 3;

  // +kubebuilder:validation:Optional
  // NodeClassName is the class of nodes or vm
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string instanceType = 4;

  // +kubebuilder:validation:Optional
  // Gpus is the desired number of gpus
  // +kubebuilder:default:=0
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Maximum=10
  // +kubebuilder:validation:Optional
  optional int32 gpus = 5;

  // +kubebuilder:validation:Optional
  // GpuClassName is the The class of gpu.
  // +kubebuilder:default:=""
  // +kubebuilder:validation:Optional
  optional string gpuClassName = 6;

  // +kubebuilder:validation:Optional
  // VolumeSize is the size of the volume that would be mounted on all the node of the cluster
  // +kubebuilder:default:=0
  // +kubebuilder:validation:Minimum=0
  // +kubebuilder:validation:Maximum=10
  // +kubebuilder:validation:Optional
  optional int32 volumeSize = 7;

  // +kubebuilder:validation:Optional
  // Spot indicate if we should we use spot instances.
  // +kubebuilder:default:=false
  // +optional
  optional bool spot = 8;

  // ConnectionName refer to the name of the provider connection
  // +kubebuilder:default:=""
  optional string connectionName = 9;

  // Owner is the account name of the owner of this cluster
  // +kubebuilder:default:="no-one"
  // +kubebuilder:validation:Optional
  optional string owner = 10;

  // Specify resource limits for the virtual cluster
  // +kubebuilder:validation:Optional
  optional ResourceLimitSpec limits = 11;

  // The cloud region, if this cluster is created in a public cloud
  // +kubebuilder:validation:Optional
  optional string region = 12;

  // The cloud AZ, if this cluster is created in a public cloud
  // +kubebuilder:validation:Optional
  optional string az = 13;

  // The cluster kubernetes version
  // +kubebuilder:validation:Optional
  optional string kubernetesVersion = 14;

  // Set to true, for auto scaling cluster
  // +kubebuilder:validation:Optional
  optional bool autoscale = 15;

  // Minimum number of nodes for auto scaling
  // +kubebuilder:validation:Optional
  optional int32 minNodes = 16;

  // Maximum number of nodes for auto scaling
  // +kubebuilder:validation:Optional
  optional int32 maxNodes = 17;

  // a reference to the cloud object in the catalog that will host the external cluster
  // +kubebuilder:validation:Optional
  optional k8s.io.api.core.v1.ObjectReference cloudRef = 18;

  // a reference to the ssh key
  // +kubebuilder:validation:Optional
  optional string sshKey = 19;
}

message WebhookSpec {
  // +kubebuilder:default:=""
  optional string url = 1;

  // Content type
  // +kubebuilder:default:="application/json"
  optional string contentType = 2;

  // The webhook secret token
  optional string token = 3;

  // custom headers to send
  map<string, string> headers = 4;

  // +kubebuilder:default:=false
  optional bool ssl = 5;
}

